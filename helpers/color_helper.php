<?php
if (!defined('APPPATH')) {
  define('APPPATH', '../application');
}
require_once APPPATH.'/vendor/autoload.php';

function wiki_colors() {
  static $wiki = NULL;
  if ($wiki === NULL) {
    $wiki = array(
      'air force blue' => 0x5d8aa8,
      'alice blue' => 0xf0f8ff,
      'alizarin crimson' => 0xe32636,
      'almond' => 0xefdecd,
      'amaranth' => 0xe52b50,
      'amber' => 0xffbf00,
      'american rose' => 0xff033e,
      'amethyst' => 0x9966cc,
      'android green' => 0xa4c639,
      'anti flash white' => 0xf2f3f4,
      'antique brass' => 0xcd9575,
      'antique fuchsia' => 0x915c83,
      'antique white' => 0xfaebd7,
      'ao' => 0x008000,
      'apple green' => 0x8db600,
      'apricot' => 0xfbceb1,
      'aqua' => 0x00ffff,
      'aquamarine' => 0x7fffd4,
      'army green' => 0x4b5320,
      'arylide yellow' => 0xe9d66b,
      'ash grey' => 0xb2beb5,
      'asparagus' => 0x87a96b,
      'atomic tangerine' => 0xff9966,
      'auburn' => 0xa52a2a,
      'aureolin' => 0xfdee00,
      'aurometalsaurus' => 0x6e7f80,
      // 'awesome' => 0xff2052,
      'azure' => 0x007fff,
      'azure mist web' => 0xf0ffff,
      'baby blue' => 0x89cff0,
      'baby blue eyes' => 0xa1caf1,
      'baby pink' => 0xf4c2c2,
      'ball blue' => 0x21abcd,
      'banana mania' => 0xfae7b5,
      'banana yellow' => 0xffe135,
      'battleship grey' => 0x848482,
      'bazaar' => 0x98777b,
      'beau blue' => 0xbcd4e6,
      'beaver' => 0x9f8170,
      'beige' => 0xf5f5dc,
      'bisque' => 0xffe4c4,
      'bistre' => 0x3d2b1f,
      'bittersweet' => 0xfe6f5e,
      'black' => 0x000000,
      'blanched almond' => 0xffebcd,
      'bleu de france' => 0x318ce7,
      'blizzard blue' => 0xace5ee,
      'blond' => 0xfaf0be,
      'blue' => 0x0000ff,
      'blue bell' => 0xa2a2d0,
      'blue gray' => 0x6699cc,
      'blue green' => 0x0d98ba,
      'blue purple' => 0x8a2be2,
      'blue violet' => 0x8a2be2,
      'blush' => 0xde5d83,
      'bole' => 0x79443b,
      'bondi blue' => 0x0095b6,
      'bone' => 0xe3dac9,
      'boston university red' => 0xcc0000,
      'bottle green' => 0x006a4e,
      'boysenberry' => 0x873260,
      'brandeis blue' => 0x0070ff,
      'brass' => 0xb5a642,
      'brick red' => 0xcb4154,
      'bright cerulean' => 0x1dacd6,
      'bright green' => 0x66ff00,
      'bright lavender' => 0xbf94e4,
      'bright maroon' => 0xc32148,
      'bright pink' => 0xff007f,
      'bright turquoise' => 0x08e8de,
      'bright ube' => 0xd19fe8,
      'brilliant lavender' => 0xf4bbff,
      'brilliant rose' => 0xff55a3,
      'brink pink' => 0xfb607f,
      'british racing green' => 0x004225,
      'bronze' => 0xcd7f32,
      'brown' => 0x964b00, // Traditional Brown
      'bubble gum' => 0xffc1cc,
      'bubbles' => 0xe7feff,
      'buff' => 0xf0dc82,
      'bulgarian rose' => 0x480607,
      'burgundy' => 0x800020,
      'burlywood' => 0xdeb887,
      'burnt orange' => 0xcc5500,
      'burnt sienna' => 0xe97451,
      'burnt umber' => 0x8a3324,
      'byzantine' => 0xbd33a4,
      'byzantium' => 0x702963,
      'cadet' => 0x536872,
      'cadet blue' => 0x5f9ea0,
      'cadet grey' => 0x91a3b0,
      'cadmium green' => 0x006b3c,
      'cadmium orange' => 0xed872d,
      'cadmium red' => 0xe30022,
      'cadmium yellow' => 0xfff600,
      'caf au lait' => 0xa67b5b,
      'caf noir' => 0x4b3621,
      'cal poly pomona green' => 0x1e4d2b,
      'cambridge blue' => 0xa3c1ad,
      'camel' => 0xc19a6b,
      'camouflage green' => 0x78866b,
      'canary' => 0xffff99,
      'canary yellow' => 0xffef00,
      'candy apple red' => 0xff0800,
      'candy pink' => 0xe4717a,
      'capri' => 0x00bfff,
      'caput mortuum' => 0x592720,
      'cardinal' => 0xc41e3a,
      'caribbean green' => 0x00cc99,
      'carmine' => 0xff0040,
      'carmine pink' => 0xeb4c42,
      'carmine red' => 0xff0038,
      'carnation pink' => 0xffa6c9,
      'carnelian' => 0xb31b1b,
      'carolina blue' => 0x99badd,
      'carrot orange' => 0xed9121,
      'celadon' => 0xace1af,
      'celeste' => 0xb2ffff,
      'celestial blue' => 0x4997d0,
      'cerise' => 0xde3163,
      'cerise pink' => 0xec3b83,
      'cerulean' => 0x007ba7,
      'cerulean blue' => 0x2a52be,
      'cg blue' => 0x007aa5,
      'cg red' => 0xe03c31,
      'chamoisee' => 0xa0785a,
      'champagne' => 0xfad6a5,
      'charcoal' => 0x36454f,
      'chartreuse' => 0x7fff00,
      'cherry' => 0xde3163,
      'cherry blossom pink' => 0xffb7c5,
      'chestnut' => 0xcd5c5c,
      'chocolate' => 0xd2691e,
      'chrome yellow' => 0xffa700,
      'cinereous' => 0x98817b,
      'cinnabar' => 0xe34234,
      'cinnamon' => 0xd2691e,
      'citrine' => 0xe4d00a,
      'classic rose' => 0xfbcce7,
      'cobalt' => 0x0047ab,
      'cocoa brown' => 0xd2691e,
      'coffee' => 0x6f4e37,
      'columbia blue' => 0x9bddff,
      'cool black' => 0x002e63,
      'cool grey' => 0x8c92ac,
      'copper' => 0xb87333,
      'copper rose' => 0x996666,
      'coquelicot' => 0xff3800,
      'coral' => 0xff7f50,
      'coral pink' => 0xf88379,
      'coral red' => 0xff4040,
      'cordovan' => 0x893f45,
      'corn' => 0xfbec5d,
      'cornell red' => 0xb31b1b,
      'cornflower' => 0x9aceeb,
      'cornflower blue' => 0x6495ed,
      'cornsilk' => 0xfff8dc,
      'cosmic latte' => 0xfff8e7,
      'cotton candy' => 0xffbcd9,
      'cream' => 0xfffdd0,
      'crimson' => 0xdc143c,
      'crimson glory' => 0xbe0032,
      'crimson red' => 0x990000,
      'cyan' => 0x00ffff,
      'daffodil' => 0xffff31,
      'dandelion' => 0xf0e130,
      'dark blue' => 0x00008b,
      'dark brown' => 0x654321,
      'dark byzantium' => 0x5d3954,
      'dark candy apple red' => 0xa40000,
      'dark cerulean' => 0x08457e,
      'dark chestnut' => 0x986960,
      'dark coral' => 0xcd5b45,
      'dark cyan' => 0x008b8b,
      'dark electric blue' => 0x536878,
      'dark goldenrod' => 0xb8860b,
      'dark gray' => 0xa9a9a9,
      'dark green' => 0x013220,
      'dark jungle green' => 0x1a2421,
      'dark khaki' => 0xbdb76b,
      'dark lava' => 0x483c32,
      'dark lavender' => 0x734f96,
      'dark magenta' => 0x8b008b,
      'dark midnight blue' => 0x003366,
      'dark olive green' => 0x556b2f,
      'dark orange' => 0xff8c00,
      'dark orchid' => 0x9932cc,
      'dark pastel blue' => 0x779ecb,
      'dark pastel green' => 0x03c03c,
      'dark pastel purple' => 0x966fd6,
      'dark pastel red' => 0xc23b22,
      'dark pink' => 0xe75480,
      'dark powder blue' => 0x003399,
      'dark raspberry' => 0x872657,
      'dark red' => 0x8b0000,
      'dark salmon' => 0xe9967a,
      'dark scarlet' => 0x560319,
      'dark sea green' => 0x8fbc8f,
      'dark sienna' => 0x3c1414,
      'dark slate blue' => 0x483d8b,
      'dark slate gray' => 0x2f4f4f,
      'dark spring green' => 0x177245,
      'dark tan' => 0x918151,
      'dark tangerine' => 0xffa812,
      'dark taupe' => 0x483c32,
      'dark terra cotta' => 0xcc4e5c,
      'dark turquoise' => 0x00ced1,
      'dark violet' => 0x9400d3,
      'dartmouth green' => 0x00693e,
      'davy grey' => 0x555555,
      'debian red' => 0xd70a53,
      'deep carmine' => 0xa9203e,
      'deep carmine pink' => 0xef3038,
      'deep carrot orange' => 0xe9692c,
      'deep cerise' => 0xda3287,
      'deep champagne' => 0xfad6a5,
      'deep chestnut' => 0xb94e48,
      'deep coffee' => 0x704241,
      'deep fuchsia' => 0xc154c1,
      'deep jungle green' => 0x004b49,
      'deep lilac' => 0x9955bb,
      'deep magenta' => 0xcc00cc,
      'deep peach' => 0xffcba4,
      'deep pink' => 0xff1493,
      'deep saffron' => 0xff9933,
      'deep sky blue' => 0x00bfff,
      // 'denim' => 0x1560bd,
      'desert' => 0xc19a6b,
      'desert sand' => 0xedc9af,
      'dim gray' => 0x696969,
      'dodger blue' => 0x1e90ff,
      'dogwood rose' => 0xd71868,
      'dollar bill' => 0x85bb65,
      'drab' => 0x967117,
      'duke blue' => 0x00009c,
      'earth yellow' => 0xe1a95f,
      'ecru' => 0xc2b280,
      'eggplant' => 0x614051,
      'eggshell' => 0xf0ead6,
      'egyptian blue' => 0x1034a6,
      'electric blue' => 0x7df9ff,
      'electric crimson' => 0xff003f,
      'electric cyan' => 0x00ffff,
      'electric green' => 0x00ff00,
      'electric indigo' => 0x6f00ff,
      'electric lavender' => 0xf4bbff,
      'electric lime' => 0xccff00,
      'electric purple' => 0xbf00ff,
      'electric ultramarine' => 0x3f00ff,
      'electric violet' => 0x8f00ff,
      'electric yellow' => 0xffff00,
      'emerald' => 0x50c878,
      'eton blue' => 0x96c8a2,
      'fallow' => 0xc19a6b,
      'falu red' => 0x801818,
      'famous' => 0xff00ff,
      'fandango' => 0xb53389,
      'fashion fuchsia' => 0xf400a1,
      'fawn' => 0xe5aa70,
      'feldgrau' => 0x4d5d53,
      'fern' => 0x71bc78,
      'fern green' => 0x4f7942,
      'ferrari red' => 0xff2800,
      'field drab' => 0x6c541e,
      'fire engine red' => 0xce2029,
      'firebrick' => 0xb22222,
      'flame' => 0xe25822,
      'flamingo pink' => 0xfc8eac,
      'flavescent' => 0xf7e98e,
      'flax' => 0xeedc82,
      'floral white' => 0xfffaf0,
      'fluorescent orange' => 0xffbf00,
      'fluorescent pink' => 0xff1493,
      'fluorescent yellow' => 0xccff00,
      'folly' => 0xff004f,
      'forest green' => 0x228b22,
      'french beige' => 0xa67b5b,
      'french blue' => 0x0072bb,
      'french lilac' => 0x86608e,
      'french rose' => 0xf64a8a,
      'fuchsia' => 0xff00ff,
      'fuchsia pink' => 0xff77ff,
      'fulvous' => 0xe48400,
      'fuzzy wuzzy' => 0xcc6666,
      'gainsboro' => 0xdcdcdc,
      'gamboge' => 0xe49b0f,
      'ghost white' => 0xf8f8ff,
      'ginger' => 0xb06500,
      'glaucous' => 0x6082b6,
      'glitter' => 0xe6e8fa,
      'gold' => 0xffd700,
      'golden brown' => 0x996515,
      'golden poppy' => 0xfcc200,
      'golden yellow' => 0xffdf00,
      'goldenrod' => 0xdaa520,
      'granny smith apple' => 0xa8e4a0,
      'gray' => 0x808080,
      'gray asparagus' => 0x465945,
      'green' => 0x00ff00,
      'green blue' => 0x1164b4,
      'green yellow' => 0xadff2f,
      'grullo' => 0xa99a86,
      'guppie green' => 0x00ff7f,
      'halay be' => 0x663854,
      'han blue' => 0x446ccf,
      'han purple' => 0x5218fa,
      'hansa yellow' => 0xe9d66b,
      'harlequin' => 0x3fff00,
      'harvard crimson' => 0xc90016,
      'harvest gold' => 0xda9100,
      'heart gold' => 0x808000,
      'heliotrope' => 0xdf73ff,
      'hollywood cerise' => 0xf400a1,
      'honeydew' => 0xf0fff0,
      'hooker green' => 0x49796b,
      'hot magenta' => 0xff1dce,
      'hot pink' => 0xff69b4,
      'hunter green' => 0x355e3b,
      'icterine' => 0xfcf75e,
      'inchworm' => 0xb2ec5d,
      'india green' => 0x138808,
      'indian red' => 0xcd5c5c,
      'indian yellow' => 0xe3a857,
      'indigo' => 0x4b0082,
      'international klein blue' => 0x002fa7,
      'international orange' => 0xff4f00,
      'iris' => 0x5a4fcf,
      'isabelline' => 0xf4f0ec,
      'islamic green' => 0x009000,
      'ivory' => 0xfffff0,
      'jade' => 0x00a86b,
      'jasmine' => 0xf8de7e,
      'jasper' => 0xd73b3e,
      'jazzberry jam' => 0xa50b5e,
      'jonquil' => 0xfada5e,
      'june bud' => 0xbdda57,
      'jungle green' => 0x29ab87,
      'kelly green' => 0x4cbb17,
      'khaki' => 0xc3b091,
      'ku crimson' => 0xe8000d,
      'la salle green' => 0x087830,
      'languid lavender' => 0xd6cadd,
      'lapis lazuli' => 0x26619c,
      'laser lemon' => 0xfefe22,
      'laurel green' => 0xa9ba9d,
      'lava' => 0xcf1020,
      'lavender' => 0xe6e6fa,
      'lavender blue' => 0xccccff,
      'lavender blush' => 0xfff0f5,
      'lavender gray' => 0xc4c3d0,
      'lavender indigo' => 0x9457eb,
      'lavender magenta' => 0xee82ee,
      'lavender mist' => 0xe6e6fa,
      'lavender pink' => 0xfbaed2,
      'lavender purple' => 0x967bb6,
      'lavender rose' => 0xfba0e3,
      'lawn green' => 0x7cfc00,
      'lemon' => 0xfff700,
      'lemon chiffon' => 0xfffacd,
      'lemon lime' => 0xbfff00,
      'lemon yellow' => 0xfff44f,
      'light apricot' => 0xfdd5b1,
      'light blue' => 0xadd8e6,
      'light brown' => 0xb5651d,
      'light carmine pink' => 0xe66771,
      'light coral' => 0xf08080,
      'light cornflower blue' => 0x93ccea,
      'light crimson' => 0xf56991,
      'light cyan' => 0xe0ffff,
      'light fuchsia pink' => 0xf984ef,
      'light goldenrod yellow' => 0xfafad2,
      'light gray' => 0xd3d3d3,
      'light green' => 0x90ee90,
      'light khaki' => 0xf0e68c,
      'light pastel purple' => 0xb19cd9,
      'light pink' => 0xffb6c1,
      'light salmon' => 0xffa07a,
      'light salmon pink' => 0xff9999,
      'light sea green' => 0x20b2aa,
      'light sky blue' => 0x87cefa,
      'light slate gray' => 0x778899,
      'light taupe' => 0xb38b6d,
      'light thulian pink' => 0xe68fac,
      'light yellow' => 0xffffed,
      'lilac' => 0xc8a2c8,
      'lime' => 0xbfff00,
      'lime green' => 0x32cd32,
      'lincoln green' => 0x195905,
      'linen' => 0xfaf0e6,
      'lion' => 0xc19a6b,
      'liver' => 0x534b4f,
      'lust' => 0xe62020,
      'macaroni and cheese' => 0xffbd88,
      'magenta' => 0xff00ff,
      'magic mint' => 0xaaf0d1,
      'magnolia' => 0xf8f4ff,
      'mahogany' => 0xc04000,
      'maize' => 0xfbec5d,
      'majorelle blue' => 0x6050dc,
      'malachite' => 0x0bda51,
      'manatee' => 0x979aaa,
      'mango tango' => 0xff8243,
      'mantis' => 0x74c365,
      'maroon' => 0x800000,
      'mauve' => 0xe0b0ff,
      'mauve taupe' => 0x915f6d,
      'mauvelous' => 0xef98aa,
      'maya blue' => 0x73c2fb,
      'meat brown' => 0xe5b73b,
      'medium aquamarine' => 0x66ddaa,
      'medium blue' => 0x0000cd,
      'medium candy apple red' => 0xe2062c,
      'medium carmine' => 0xaf4035,
      'medium champagne' => 0xf3e5ab,
      'medium electric blue' => 0x035096,
      'medium jungle green' => 0x1c352d,
      'medium lavender magenta' => 0xdda0dd,
      'medium orchid' => 0xba55d3,
      'medium persian blue' => 0x0067a5,
      'medium purple' => 0x9370db,
      'medium red violet' => 0xbb3385,
      'medium sea green' => 0x3cb371,
      'medium slate blue' => 0x7b68ee,
      'medium spring bud' => 0xc9dc87,
      'medium spring green' => 0x00fa9a,
      'medium taupe' => 0x674c47,
      'medium teal blue' => 0x0054b4,
      'medium turquoise' => 0x48d1cc,
      'medium violet red' => 0xc71585,
      'melon' => 0xfdbcb4,
      'midnight blue' => 0x191970,
      'midnight green' => 0x004953,
      'mikado yellow' => 0xffc40c,
      'mint' => 0x3eb489,
      'mint cream' => 0xf5fffa,
      'mint green' => 0x98ff98,
      'misty rose' => 0xffe4e1,
      'moccasin' => 0xfaebd7,
      'mode beige' => 0x967117,
      'moonstone blue' => 0x73a9c2,
      'mordant red 19' => 0xae0c00,
      'moss green' => 0xaddfad,
      'mountain meadow' => 0x30ba8f,
      'mountbatten pink' => 0x997a8d,
      'msu green' => 0x18453b,
      'mulberry' => 0xc54b8c,
      'munsell' => 0xf2f3f4,
      'mustard' => 0xffdb58,
      'myrtle' => 0x21421e,
      'nadeshiko pink' => 0xf6adc6,
      'napier green' => 0x2a8000,
      'naples yellow' => 0xfada5e,
      'navajo white' => 0xffdead,
      'navy blue' => 0x000080,
      'neon carrot' => 0xffa343,
      'neon fuchsia' => 0xfe59c2,
      'neon green' => 0x39ff14,
      'non photo blue' => 0xa4dded,
      'north texas green' => 0x059033,
      'ocean boat blue' => 0x0077be,
      'ochre' => 0xcc7722,
      'office green' => 0x008000,
      'old gold' => 0xcfb53b,
      'old lace' => 0xfdf5e6,
      'old lavender' => 0x796878,
      'old mauve' => 0x673147,
      'old rose' => 0xc08081,
      'olive' => 0x808000,
      'olive drab' => 0x6b8e23,
      'olive green' => 0xbab86c,
      'olivine' => 0x9ab973,
      'onyx' => 0x0f0f0f,
      'opera mauve' => 0xb784a7,
      'orange' => 0xffa500,
      'orange peel' => 0xff9f00,
      'orange red' => 0xff4500,
      'orange yellow' => 0xf8d568,
      'orchid' => 0xda70d6,
      'otter brown' => 0x654321,
      'outer space' => 0x414a4c,
      'outrageous orange' => 0xff6e4a,
      'oxford blue' => 0x002147,
      'pacific blue' => 0x1ca9c9,
      'pakistan green' => 0x006600,
      'palatinate blue' => 0x273be2,
      'palatinate purple' => 0x682860,
      'pale aqua' => 0xbcd4e6,
      'pale blue' => 0xafeeee,
      'pale brown' => 0x987654,
      'pale carmine' => 0xaf4035,
      'pale cerulean' => 0x9bc4e2,
      'pale chestnut' => 0xddadaf,
      'pale copper' => 0xda8a67,
      'pale cornflower blue' => 0xabcdef,
      'pale gold' => 0xe6be8a,
      'pale goldenrod' => 0xeee8aa,
      'pale green' => 0x98fb98,
      'pale lavender' => 0xdcd0ff,
      'pale magenta' => 0xf984e5,
      'pale pink' => 0xfadadd,
      'pale plum' => 0xdda0dd,
      'pale red violet' => 0xdb7093,
      'pale robin egg blue' => 0x96ded1,
      'pale silver' => 0xc9c0bb,
      'pale spring bud' => 0xecebbd,
      'pale taupe' => 0xbc987e,
      'pale violet red' => 0xdb7093,
      'pansy purple' => 0x78184a,
      'papaya whip' => 0xffefd5,
      'paris green' => 0x50c878,
      'pastel blue' => 0xaec6cf,
      'pastel brown' => 0x836953,
      'pastel gray' => 0xcfcfc4,
      'pastel green' => 0x77dd77,
      'pastel magenta' => 0xf49ac2,
      'pastel orange' => 0xffb347,
      'pastel pink' => 0xffd1dc,
      'pastel purple' => 0xb39eb5,
      'pastel red' => 0xff6961,
      'pastel violet' => 0xcb99c9,
      'pastel yellow' => 0xfdfd96,
      'patriarch' => 0x800080,
      'payne grey' => 0x536878,
      'peach' => 0xffe5b4,
      'peach puff' => 0xffdab9,
      'peach yellow' => 0xfadfad,
      'pear' => 0xd1e231,
      'pearl' => 0xeae0c8,
      'pearl aqua' => 0x88d8c0,
      'peridot' => 0xe6e200,
      'periwinkle' => 0xccccff,
      'persian blue' => 0x1c39bb,
      'persian indigo' => 0x32127a,
      'persian orange' => 0xd99058,
      'persian pink' => 0xf77fbe,
      'persian plum' => 0x701c1c,
      'persian red' => 0xcc3333,
      'persian rose' => 0xfe28a2,
      'phlox' => 0xdf00ff,
      'phthalo blue' => 0x000f89,
      'phthalo green' => 0x123524,
      'piggy pink' => 0xfddde6,
      'pine green' => 0x01796f,
      'pink' => 0xffc0cb,
      'pink flamingo' => 0xfc74fd,
      'pink pearl' => 0xe7accf,
      'pink sherbet' => 0xf78fa7,
      'pistachio' => 0x93c572,
      'platinum' => 0xe5e4e2,
      'plum' => 0xdda0dd,
      'portland orange' => 0xff5a36,
      'powder blue' => 0xb0e0e6,
      'princeton orange' => 0xff8f00,
      'prussian blue' => 0x003153,
      'psychedelic purple' => 0xdf00ff,
      'puce' => 0xcc8899,
      'pumpkin' => 0xff7518,
      'purple' => 0x800080,
      'purple heart' => 0x69359c,
      'purple mountain majesty' => 0x9678b6,
      'purple mountain s majesty' => 0x9d81ba,
      'purple pizzazz' => 0xfe4eda,
      'purple taupe' => 0x50404d,
      'rackley' => 0x5d8aa8,
      'radical red' => 0xff355e,
      'raspberry' => 0xe30b5d,
      'raspberry glace' => 0x915f6d,
      'raspberry pink' => 0xe25098,
      'raspberry rose' => 0xb3446c,
      'raw sienna' => 0xd68a59,
      'razzle dazzle rose' => 0xff33cc,
      'razzmatazz' => 0xe3256b,
      'red' => 0xff0000,
      'red brown' => 0xa52a2a,
      'red orange' => 0xff5349,
      'red violet' => 0xc71585,
      'rich black' => 0x004040,
      'rich carmine' => 0xd70040,
      'rich electric blue' => 0x0892d0,
      'rich lilac' => 0xb666d2,
      'rich maroon' => 0xb03060,
      'rifle green' => 0x414833,
      'robin s egg blue' => 0x1fcecb,
      // 'rose' => 0xff007f,
      'rose bonbon' => 0xf9429e,
      'rose ebony' => 0x674846,
      'rose gold' => 0xb76e79,
      'rose madder' => 0xe32636,
      'rose pink' => 0xff66cc,
      'rose quartz' => 0xaa98a9,
      'rose taupe' => 0x905d5d,
      'rose vale' => 0xab4e52,
      'rosewood' => 0x65000b,
      'rosso corsa' => 0xd40000,
      'rosy brown' => 0xbc8f8f,
      'royal azure' => 0x0038a8,
      'royal blue' => 0x4169e1,
      'royal fuchsia' => 0xca2c92,
      'royal purple' => 0x7851a9,
      'ruby' => 0xe0115f,
      'ruddy' => 0xff0028,
      'ruddy brown' => 0xbb6528,
      'ruddy pink' => 0xe18e96,
      'rufous' => 0xa81c07,
      'russet' => 0x80461b,
      'rust' => 0xb7410e,
      'sacramento state green' => 0x00563f,
      'saddle brown' => 0x8b4513,
      'safety orange' => 0xff6700,
      'saffron' => 0xf4c430,
      'saint patrick blue' => 0x23297a,
      'salmon' => 0xff8c69,
      'salmon pink' => 0xff91a4,
      'sand' => 0xc2b280,
      'sand dune' => 0x967117,
      'sandstorm' => 0xecd540,
      'sandy brown' => 0xf4a460,
      'sandy taupe' => 0x967117,
      'sap green' => 0x507d2a,
      'sapphire' => 0x0f52ba,
      'satin sheen gold' => 0xcba135,
      'scarlet' => 0xff2400,
      'school bus yellow' => 0xffd800,
      'screamin green' => 0x76ff7a,
      'sea blue' => 0x006994,
      'sea green' => 0x2e8b57,
      'seal brown' => 0x321414,
      'seashell' => 0xfff5ee,
      'selective yellow' => 0xffba00,
      'sepia' => 0x704214,
      'shadow' => 0x8a795d,
      'shamrock' => 0x45cea2,
      'shamrock green' => 0x009e60,
      'shocking pink' => 0xfc0fc0,
      'sienna' => 0x882d17,
      'silver' => 0xc0c0c0,
      'sinopia' => 0xcb410b,
      'skobeloff' => 0x007474,
      'sky blue' => 0x87ceeb,
      'sky magenta' => 0xcf71af,
      'slate blue' => 0x6a5acd,
      'slate gray' => 0x708090,
      'smalt' => 0x003399,
      'smokey topaz' => 0x933d41,
      'smoky black' => 0x100c08,
      'snow' => 0xfffafa,
      'spiro disco ball' => 0x0fc0fc,
      'spring bud' => 0xa7fc00,
      'spring green' => 0x00ff7f,
      'steel blue' => 0x4682b4,
      'stil de grain yellow' => 0xfada5e,
      'stizza' => 0x990000,
      'stormcloud' => 0x008080,
      'straw' => 0xe4d96f,
      'sunglow' => 0xffcc33,
      'sunset' => 0xfad6a5,
      'sunset orange' => 0xfd5e53,
      'tan' => 0xd2b48c,
      'tangelo' => 0xf94d00,
      'tangerine' => 0xf28500,
      'tangerine yellow' => 0xffcc00,
      'taupe' => 0x483c32,
      'taupe gray' => 0x8b8589,
      'tawny' => 0xcd5700,
      'tea green' => 0xd0f0c0,
      'tea rose' => 0xf4c2c2,
      'teal' => 0x008080,
      'teal blue' => 0x367588,
      'teal green' => 0x006d5b,
      'terra cotta' => 0xe2725b,
      'thistle' => 0xd8bfd8,
      'thulian pink' => 0xde6fa1,
      'tickle me pink' => 0xfc89ac,
      'tiffany blue' => 0x0abab5,
      'tiger eye' => 0xe08d3c,
      'timberwolf' => 0xdbd7d2,
      'titanium yellow' => 0xeee600,
      'tomato' => 0xff6347,
      'toolbox' => 0x746cc0,
      'topaz' => 0xffc87c,
      'tractor red' => 0xfd0e35,
      'trolley grey' => 0x808080,
      'tropical rain forest' => 0x00755e,
      'true blue' => 0x0073cf,
      'tufts blue' => 0x417dc1,
      'tumbleweed' => 0xdeaa88,
      'turkish rose' => 0xb57281,
      'turquoise' => 0x30d5c8,
      'turquoise blue' => 0x00ffef,
      'turquoise green' => 0xa0d6b4,
      'tuscan red' => 0x66424d,
      'twilight lavender' => 0x8a496b,
      'tyrian purple' => 0x66023c,
      'ua blue' => 0x0033aa,
      'ua red' => 0xd9004c,
      'ube' => 0x8878c3,
      'ucla blue' => 0x536895,
      'ucla gold' => 0xffb300,
      'ufo green' => 0x3cd070,
      'ultra pink' => 0xff6fff,
      'ultramarine' => 0x120a8f,
      'ultramarine blue' => 0x4166f5,
      'umber' => 0x635147,
      'united nations blue' => 0x5b92e5,
      'university of california gold' => 0xb78727,
      'unmellow yellow' => 0xffff66,
      'up forest green' => 0x014421,
      'up maroon' => 0x7b1113,
      'upsdell red' => 0xae2029,
      'urobilin' => 0xe1ad21,
      'usc cardinal' => 0x990000,
      'usc gold' => 0xffcc00,
      'utah crimson' => 0xd3003f,
      'vanilla' => 0xf3e5ab,
      'vegas gold' => 0xc5b358,
      'venetian red' => 0xc80815,
      'verdigris' => 0x43b3ae,
      'vermilion' => 0xe34234,
      'veronica' => 0xa020f0,
      'violet' => 0xee82ee,
      'violet blue' => 0x324ab2,
      'violet red' => 0xf75394,
      'viridian' => 0x40826d,
      'vivid auburn' => 0x922724,
      'vivid burgundy' => 0x9f1d35,
      'vivid cerise' => 0xda1d81,
      'vivid tangerine' => 0xffa089,
      'vivid violet' => 0x9f00ff,
      'warm black' => 0x004242,
      'waterspout' => 0x00ffff,
      'wenge' => 0x645452,
      'wheat' => 0xf5deb3,
      'white' => 0xffffff,
      'white smoke' => 0xf5f5f5,
      'wild blue yonder' => 0xa2add0,
      'wild strawberry' => 0xff43a4,
      'wild watermelon' => 0xfc6c85,
      'wine' => 0x722f37,
      'wisteria' => 0xc9a0dc,
      'xanadu' => 0x738678,
      'yale blue' => 0x0f4d92,
      'yellow' => 0xffff00,
      'yellow green' => 0x9acd32,
      'yellow orange' => 0xffae42,
      'zaffre' => 0x0014a8,
      'zinnwaldite brown' => 0x2c1608
    );
    // Add some aliases
    $wiki['camo'] = $wiki['camouflage'] = $wiki['camouflage green'];
    $wiki['terracotta'] = $wiki['terra cotta'];
    $wiki['dark terracotta'] = $wiki['dark terra cotta'];
  }

  return $wiki;
}

function x11_colors() {
  static $x11 = NULL;
  if ($x11 === NULL) {
    $x11 = array(
      'indigo' => 0x4b0082,
      'gold' => 0xffd700,
      'hotpink' => 0xff69b4,
      'firebrick' => 0xb22222,
      'indianred' => 0xcd5c5c,
      'yellow' => 0xffff00,
      'mistyrose' => 0xffe4e1,
      'darkolivegreen' => 0x556b2f,
      'olive' => 0x808000,
      'darkseagreen' => 0x8fbc8f,
      'pink' => 0xffc0cb,
      'tomato' => 0xff6347,
      'lightcoral' => 0xf08080,
      'orangered' => 0xff4500,
      'navajowhite' => 0xffdead,
      'lime' => 0x00ff00,
      'palegreen' => 0x98fb98,
      'darkslategrey' => 0x2f4f4f,
      'greenyellow' => 0xadff2f,
      'burlywood' => 0xdeb887,
      'seashell' => 0xfff5ee,
      'mediumspringgreen' => 0x00fa9a,
      'fuchsia' => 0xff00ff,
      'papayawhip' => 0xffefd5,
      'blanchedalmond' => 0xffebcd,
      'chartreuse' => 0x7fff00,
      'dimgray' => 0x696969,
      'black' => 0x000000,
      'peachpuff' => 0xffdab9,
      'springgreen' => 0x00ff7f,
      'aquamarine' => 0x7fffd4,
      'white' => 0xffffff,
      'orange' => 0xffa500,
      'lightsalmon' => 0xffa07a,
      'darkslategray' => 0x2f4f4f,
      // 'brown' => 0xa52a2a,
      'ivory' => 0xfffff0,
      'dodgerblue' => 0x1e90ff,
      'peru' => 0xcd853f,
      'lawngreen' => 0x7cfc00,
      'chocolate' => 0xd2691e,
      'crimson' => 0xdc143c,
      'forestgreen' => 0x228b22,
      'darkgrey' => 0xa9a9a9,
      'lightseagreen' => 0x20b2aa,
      'cyan' => 0x00ffff,
      'mintcream' => 0xf5fffa,
      'silver' => 0xc0c0c0,
      'antiquewhite' => 0xfaebd7,
      'mediumorchid' => 0xba55d3,
      'skyblue' => 0x87ceeb,
      'gray' => 0x808080,
      'darkturquoise' => 0x00ced1,
      'goldenrod' => 0xdaa520,
      'darkgreen' => 0x006400,
      'floralwhite' => 0xfffaf0,
      'darkviolet' => 0x9400d3,
      'darkgray' => 0xa9a9a9,
      'moccasin' => 0xffe4b5,
      'saddlebrown' => 0x8b4513,
      'grey' => 0x808080,
      'darkslateblue' => 0x483d8b,
      'lightskyblue' => 0x87cefa,
      'lightpink' => 0xffb6c1,
      'mediumvioletred' => 0xc71585,
      'slategrey' => 0x708090,
      'red' => 0xff0000,
      'deeppink' => 0xff1493,
      'limegreen' => 0x32cd32,
      'darkmagenta' => 0x8b008b,
      'palegoldenrod' => 0xeee8aa,
      'plum' => 0xdda0dd,
      'turquoise' => 0x40e0d0,
      'lightgrey' => 0xd3d3d3,
      'lightgoldenrodyellow' => 0xfafad2,
      'darkgoldenrod' => 0xb8860b,
      'lavender' => 0xe6e6fa,
      'maroon' => 0x800000,
      'yellowgreen' => 0x9acd32,
      'sandybrown' => 0xf4a460,
      'thistle' => 0xd8bfd8,
      'violet' => 0xee82ee,
      'navy' => 0x000080,
      'magenta' => 0xff00ff,
      'dimgrey' => 0x696969,
      'tan' => 0xd2b48c,
      'rosybrown' => 0xbc8f8f,
      'olivedrab' => 0x6b8e23,
      'blue' => 0x0000ff,
      'lightblue' => 0xadd8e6,
      'ghostwhite' => 0xf8f8ff,
      'honeydew' => 0xf0fff0,
      'cornflowerblue' => 0x6495ed,
      'slateblue' => 0x6a5acd,
      // 'linen' => 0xfaf0e6,
      'darkblue' => 0x00008b,
      'powderblue' => 0xb0e0e6,
      'seagreen' => 0x2e8b57,
      'darkkhaki' => 0xbdb76b,
      'snow' => 0xfffafa,
      'sienna' => 0xa0522d,
      'mediumblue' => 0x0000cd,
      'royalblue' => 0x4169e1,
      'lightcyan' => 0xe0ffff,
      'green' => 0x008000,
      'mediumpurple' => 0x9370db,
      'midnightblue' => 0x191970,
      'cornsilk' => 0xfff8dc,
      'paleturquoise' => 0xafeeee,
      'bisque' => 0xffe4c4,
      'slategray' => 0x708090,
      'darkcyan' => 0x008b8b,
      'khaki' => 0xf0e68c,
      'wheat' => 0xf5deb3,
      'teal' => 0x008080,
      'darkorchid' => 0x9932cc,
      'deepskyblue' => 0x00bfff,
      'salmon' => 0xfa8072,
      'darkred' => 0x8b0000,
      'steelblue' => 0x4682b4,
      'palevioletred' => 0xdb7093,
      'lightslategray' => 0x778899,
      'aliceblue' => 0xf0f8ff,
      'lightslategrey' => 0x778899,
      'lightgreen' => 0x90ee90,
      'orchid' => 0xda70d6,
      'gainsboro' => 0xdcdcdc,
      'mediumseagreen' => 0x3cb371,
      'lightgray' => 0xd3d3d3,
      'mediumturquoise' => 0x48d1cc,
      'lemonchiffon' => 0xfffacd,
      'cadetblue' => 0x5f9ea0,
      'lightyellow' => 0xffffe0,
      'lavenderblush' => 0xfff0f5,
      'coral' => 0xff7f50,
      'purple' => 0x800080,
      'aqua' => 0x00ffff,
      'whitesmoke' => 0xf5f5f5,
      'mediumslateblue' => 0x7b68ee,
      'darkorange' => 0xff8c00,
      'mediumaquamarine' => 0x66cdaa,
      'darksalmon' => 0xe9967a,
      'beige' => 0xf5f5dc,
      'blueviolet' => 0x8a2be2,
      'azure' => 0xf0ffff,
      'lightsteelblue' => 0xb0c4de,
      'oldlace' => 0xfdf5e6
    );
  }
  return $x11;
}

function name_to_color($name, $allow_partial_match = FALSE) {
  $wiki = wiki_colors();
  $x11 = x11_colors();

  $name = strtolower($name);
  $x11_key = preg_replace('/\W/', '', $name);
  if (array_key_exists($x11_key, $x11)) {
    return $x11[$x11_key];
  }

  if (array_key_exists($name, $wiki)) {
    return $wiki[$name];
  }

  if ($allow_partial_match) {
    $chunks = preg_split('/\W+/', $name, 2);
    if (count($chunks) > 1) {
      return name_to_color($chunks[1], TRUE);
    }
  }
  return -1;
}

function rgb2hex($r, $g, $b) {
  return (int)(($r << 16) + ($g << 8) + $b);
}


// freq DESC, index ASC
function compare_frequencies($a, $b) {
  if ($a[0] === $b[0]) {
    return $a[1] - $b[1];
  }
  return $b[0] - $a[0];
}

/**
 * Extract known colors from a text.
 * 
 * Since this function process the string in reverse, "Dark Blue Charcoal"
 * will be extracted as "Blue Charcoal" instead of "Dark Blue" and "Charcoal".
 * However, it will correctly get "Orange Red".
 * 
 * @param  string $str a string to extract colors from
 * @return array(string)      an array of extracted color names, ordered by frequency
 */
function str_extract_colors($str) {
  if (preg_match('/(^|\W)multi\W*colou?r(\W|$)/i', $str)) {
    return array('multicolor');
  }
  $tokens = preg_split('/[^\w\']+/i', 'BEGIN '.$str);
  $num_tokens = count($tokens);
  $colors = array();
  $i = $num_tokens - 1;
  $suffix = '';
  while ($i >= 0) {
    $name = $tokens[$i].$suffix;
    if (name_to_color($name) === -1) {
      if (empty($suffix)) {
        --$i;
      } else {
        $key = strtolower(substr($suffix, 1));
        if (array_key_exists($key, $colors)) {
          ++$colors[$key][0];
          $colors[$key][1] = $i;
        } else {
          $colors[$key] = array(1, $i);
        }
      }
      $suffix = '';
    } else {
      $suffix = ' '.$name;
      --$i;
    }
  }

  uasort($colors, 'compare_frequencies');
  return array_keys($colors);
}

/**
 * Calculate the normalized distance between two colors on the HSV color space.
 * @param  array $a The first color
 * @param  array $b The second color
 * @param  array  [$w] A weight array
 * @return float    The normalized distance in the range [0, 1)
 */
function hsv_distance($a, $b, $w = array('hue' => 180, 'sat' => 100, 'val' => 100)) {
  $wh = $w['hue'];
  $ws = $w['sat'];
  $wv = $w['val'];
  $dh = abs($a['hue'] - $b['hue']);
  if ($dh > 180) {
    $dh -= 360;
  }
  $dh *= $wh/180.0;
  $ds = ($a['sat'] - $b['sat'])*$ws;
  $dv = ($a['val'] - $b['val'])*$wv/255.0;
  return sqrt(($dh*$dh + $ds*$ds + $dv*$dv)/($wh*$wh + $ws*$ws + $wv*$wv));
}

/**
 * Get a color from the palette with the closest hue.
 * @param  Color $color   a Color instance
 * @param  array(Color) $palette an array of Color instances
 * @return int          the index of the closest color in the palette
 */
function closest_palette_color($color, $palette) {
  $closest_distance = INF;
  $closest_index = 0;
  $color_hsv = $color->toHsvFloat();
  foreach ($palette as $index => $palette_color) {
    if ($palette_color < 0)
      continue;
    $palette_hsv = (new Color($palette_color))->toHsvFloat();
    $dhsv = hsv_distance($color_hsv, $palette_hsv);
    if ($dhsv < $closest_distance) {
      $closest_distance = $dhsv;
      $closest_index = $index;
    }
  }
  return $closest_index;
}

/**
 * Get an array of colors in a palette that are within a HSV threshold
 * of a target color. If no colors are in the threshold, an array
 * containing the closest color is returned.
 * 
 * @param  Color $color     A target color
 * @param  array $palette   A palette
 * @param  float  [$threshold = 0.25] A distance threshold
 * @param  array  [$weight]    An array of each HSV component's weight
 * @return array            An array of palette colors within the threshold
 */
function close_colors($color, $palette, $threshold = 0.25, $weight = array('hue' => 3, 'sat' => 1, 'val' => 1)) {
  $color_hsv = $color->toHsvFloat();
  $is_grayscale = $color->isGrayScale(16);
  $palette_colors = array();
  $closest_distance = INF;
  $closest_index = 0;
  foreach ($palette as $index => $hex) {
    if ($hex < 0)
      continue;
    $palette_color = new Color($hex);
    $palette_hsv = $palette_color->toHsvFloat();
    $w = $weight;
    $p_is_grayscale = $palette_color->isGrayScale(16);
    if ($is_grayscale || $p_is_grayscale) {
      if (!$p_is_grayscale || !$color->isGrayScale(24))
        continue;
      $w['hue'] = 0;
    }

    $dhsv = hsv_distance($color_hsv, $palette_hsv, $w);

    if ($dhsv <= $threshold) {
      $palette_colors[$index] = $dhsv;
    } else if ($dhsv < $closest_distance) {
      $closest_distance = $dhsv;
      $closest_index = $index;
    }
  }
  asort($palette_colors);
  return empty($palette_colors) ? array($closest_index) : array_keys($palette_colors);
}

?>